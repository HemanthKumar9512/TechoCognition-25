<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS SHIELD - Advanced Safety Monitor</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>AEGIS SHIELD</h2>
            <p>Initializing Advanced Safety System</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>AEGIS SHIELD</span>
                </div>
                <div class="system-status">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">Initializing...</span>
                </div>
            </div>
            <div class="header-right">
                <div class="connection-controls">
                    <input type="text" id="serverIP" placeholder="ESP32 IP (ws://192.168.1.100:81)" value="ws://192.168.1.100:81">
                    <button id="connectBtn" class="btn-connect">
                        <i class="fas fa-plug"></i> Connect
                    </button>
                    <button id="settingsBtn" class="btn-settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
                <div class="user-profile">
                    <div class="avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="navigation">
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" data-tab="analytics">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </button>
            <button class="nav-btn" data-tab="ai-insights">
                <i class="fas fa-robot"></i>
                <span>AI Insights</span>
            </button>
            <button class="nav-btn" data-tab="alerts">
                <i class="fas fa-bell"></i>
                <span>Alerts</span>
            </button>
            <button class="nav-btn" data-tab="settings">
                <i class="fas fa-cogs"></i>
                <span>Settings</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <!-- Connection Status -->
                    <div class="card status-card">
                        <div class="card-header">
                            <h3><i class="fas fa-wifi"></i> Connection Status</h3>
                            <div class="card-actions">
                                <button id="reconnectBtn" class="btn-icon">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="connection-info">
                                <div class="connection-status" id="connectionStatus">
                                    <div class="status-dot disconnected"></div>
                                    <span>Disconnected</span>
                                </div>
                                <div class="connection-details">
                                    <div class="detail-item">
                                        <span>Last Update:</span>
                                        <span id="lastUpdate">Never</span>
                                    </div>
                                    <div class="detail-item">
                                        <span>Data Rate:</span>
                                        <span id="dataRate">0 Hz</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vital Signs Grid -->
                    <div class="card vital-card">
                        <div class="card-header">
                            <h3><i class="fas fa-heartbeat"></i> Vital Signs</h3>
                        </div>
                        <div class="card-body">
                            <div class="vitals-grid">
                                <div class="vital-item" data-type="heartRate">
                                    <div class="vital-icon">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <div class="vital-info">
                                        <div class="vital-value" id="heartRateValue">--</div>
                                        <div class="vital-label">Heart Rate</div>
                                        <div class="vital-unit">BPM</div>
                                    </div>
                                    <div class="vital-trend" id="heartRateTrend">
                                        <i class="fas fa-minus"></i>
                                    </div>
                                </div>
                                <div class="vital-item" data-type="temperature">
                                    <div class="vital-icon">
                                        <i class="fas fa-thermometer-half"></i>
                                    </div>
                                    <div class="vital-info">
                                        <div class="vital-value" id="temperatureValue">--</div>
                                        <div class="vital-label">Temperature</div>
                                        <div class="vital-unit">Â°C</div>
                                    </div>
                                    <div class="vital-trend" id="temperatureTrend">
                                        <i class="fas fa-minus"></i>
                                    </div>
                                </div>
                                <div class="vital-item" data-type="gasLevel">
                                    <div class="vital-icon">
                                        <i class="fas fa-wind"></i>
                                    </div>
                                    <div class="vital-info">
                                        <div class="vital-value" id="gasLevelValue">--</div>
                                        <div class="vital-label">Gas Level</div>
                                        <div class="vital-unit">PPM</div>
                                    </div>
                                    <div class="vital-trend" id="gasLevelTrend">
                                        <i class="fas fa-minus"></i>
                                    </div>
                                </div>
                                <div class="vital-item" data-type="posture">
                                    <div class="vital-icon">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="vital-info">
                                        <div class="vital-value" id="postureValue">--</div>
                                        <div class="vital-label">Posture</div>
                                        <div class="vital-unit">Status</div>
                                    </div>
                                    <div class="vital-trend" id="postureTrend">
                                        <i class="fas fa-minus"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Charts -->
                    <div class="card chart-card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Real-time Monitoring</h3>
                            <div class="chart-controls">
                                <select id="chartType">
                                    <option value="heartRate">Heart Rate</option>
                                    <option value="temperature">Temperature</option>
                                    <option value="gasLevel">Gas Level</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="realtimeChart"></canvas>
                        </div>
                    </div>

                    <!-- AI Health Score -->
                    <div class="card health-card">
                        <div class="card-header">
                            <h3><i class="fas fa-brain"></i> AI Health Assessment</h3>
                        </div>
                        <div class="card-body">
                            <div class="health-score">
                                <div class="score-circle">
                                    <div class="score-value" id="healthScore">--</div>
                                    <div class="score-label">Overall Score</div>
                                </div>
                                <div class="health-breakdown">
                                    <div class="breakdown-item">
                                        <span>Cardiovascular</span>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="cardioScore" style="width: 0%"></div>
                                        </div>
                                        <span id="cardioValue">--</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span>Respiratory</span>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="respiratoryScore" style="width: 0%"></div>
                                        </div>
                                        <span id="respiratoryValue">--</span>
                                    </div>
                                    <div class="breakdown-item">
                                        <span>Stress Level</span>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="stressScore" style="width: 0%"></div>
                                        </div>
                                        <span id="stressValue">--</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Safety Alerts -->
                    <div class="card alert-card">
                        <div class="card-header">
                            <h3><i class="fas fa-exclamation-triangle"></i> Safety Alerts</h3>
                            <div class="alert-badge" id="alertCount">0</div>
                        </div>
                        <div class="card-body">
                            <div class="alerts-list" id="alertsList">
                                <div class="no-alerts">
                                    <i class="fas fa-check-circle"></i>
                                    <p>All systems normal</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Controls -->
                    <div class="card emergency-card">
                        <div class="card-header">
                            <h3><i class="fas fa-first-aid"></i> Emergency Response</h3>
                        </div>
                        <div class="card-body">
                            <div class="emergency-controls">
                                <button class="btn-emergency" id="emergencyBtn">
                                    <i class="fas fa-bell"></i>
                                    Trigger Emergency Alert
                                </button>
                                <button class="btn-sos" id="sosBtn">
                                    <i class="fas fa-crosshairs"></i>
                                    SOS Broadcast
                                </button>
                            </div>
                            <div class="emergency-info">
                                <div class="info-item">
                                    <i class="fas fa-location-arrow"></i>
                                    <span id="gpsStatus">GPS: Acquiring...</span>
                                </div>
                                <div class="info-item">
                                    <i class="fas fa-clock"></i>
                                    <span id="responseTime">Response: --</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="analytics-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-bar"></i> Historical Trends</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="analyticsChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-tachometer-alt"></i> Performance Metrics</h3>
                        </div>
                        <div class="card-body">
                            <div class="metrics-grid">
                                <!-- Metrics will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Insights Tab -->
            <div id="ai-insights" class="tab-content">
                <div class="ai-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-robot"></i> AI Health Predictions</h3>
                        </div>
                        <div class="card-body">
                            <div class="ai-predictions" id="aiPredictions">
                                <!-- AI insights will be populated here -->
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-lightbulb"></i> Smart Recommendations</h3>
                        </div>
                        <div class="card-body">
                            <div class="recommendations" id="recommendations">
                                <!-- Recommendations will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerts Tab -->
            <div id="alerts" class="tab-content">
                <div class="alerts-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-history"></i> Alert History</h3>
                        </div>
                        <div class="card-body">
                            <div class="alert-history" id="alertHistory">
                                <!-- Alert history will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="settings-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-sliders-h"></i> Application Settings</h3>
                        </div>
                        <div class="card-body">
                            <div class="settings-form">
                                <div class="setting-group">
                                    <label for="updateInterval">Data Update Interval</label>
                                    <select id="updateInterval">
                                        <option value="1000">1 Second</option>
                                        <option value="2000" selected>2 Seconds</option>
                                        <option value="5000">5 Seconds</option>
                                    </select>
                                </div>
                                <div class="setting-group">
                                    <label for="alertThreshold">Alert Threshold</label>
                                    <select id="alertThreshold">
                                        <option value="low">Low Sensitivity</option>
                                        <option value="medium" selected>Medium Sensitivity</option>
                                        <option value="high">High Sensitivity</option>
                                    </select>
                                </div>
                                <div class="setting-group">
                                    <label>
                                        <input type="checkbox" id="soundAlerts" checked>
                                        Enable Sound Alerts
                                    </label>
                                </div>
                                <div class="setting-group">
                                    <label>
                                        <input type="checkbox" id="autoReconnect" checked>
                                        Auto Reconnect
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification System -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="modal">
        <div class="modal-content emergency-modal">
            <div class="modal-header">
                <h2><i class="fas fa-exclamation-triangle"></i> EMERGENCY ALERT</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="emergency-details">
                    <p id="emergencyMessage">Emergency situation detected!</p>
                    <div class="emergency-actions">
                        <button class="btn-confirm" id="confirmEmergency">Confirm Emergency</button>
                        <button class="btn-cancel" id="cancelEmergency">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="ai-engine.js"></script>
    <script src="script.js"></script>
    <!-- Extended Sensors Card -->
<div class="card extended-card">
    <div class="card-header">
        <h3><i class="fas fa-microchip"></i> Extended Sensors</h3>
    </div>
    <div class="card-body">
        <div class="extended-grid">
            <div class="extended-item">
                <div class="extended-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <div class="extended-info">
                    <div class="extended-value" id="humidityValue">--</div>
                    <div class="extended-label">Humidity</div>
                    <div class="extended-unit">%</div>
                </div>
            </div>
            <div class="extended-item">
                <div class="extended-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <div class="extended-info">
                    <div class="extended-value" id="stressValue">--</div>
                    <div class="extended-label">Stress Level</div>
                    <div class="extended-unit">%</div>
                </div>
            </div>
            <div class="extended-item">
                <div class="extended-icon">
                    <i class="fas fa-running"></i>
                </div>
                <div class="extended-info">
                    <div class="extended-value" id="motionValue">--</div>
                    <div class="extended-label">Motion</div>
                    <div class="extended-unit">Status</div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>